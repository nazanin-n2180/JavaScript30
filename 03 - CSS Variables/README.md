<div dir="rtl">

# تمرین ۳: متغیرهای CSS

در این تمرین، یک صفحهٔ وب داریم که تصویری را نشان می‌دهد و شامل سه ورودی است که کاربر می‌تواند با استفاده از آن‌ها میزان **فاصله از اطراف (padding)**، **میزان تاری تصویر (blur)**، و **رنگ پس‌زمینه (background color)** را تغییر دهد.

هدف این تمرین، آشنایی عملی با **متغیرهای CSS3** است؛ متغیرهایی که می‌توان با **جاوااسکریپت** مقدارشان را بصورت پویا (dynamic) تغییر داد.


## خلاصه

_متغیرهای CSS3_ با متغیرهای Sass متفاوت‌اند. متغیرهای Sass داخل فایل Sass تعریف می‌شوند و پس از تبدیل به CSS، دیگر قابل تغییر نیستند.
اما متغیرهای CSS3 این قابلیت را دارند که با استفاده از JavaScript مقادیرشان تغییر داده شود.

عناصر `input` در HTML دارای ویژگی `name` هستند که با متغیرهایی که می‌خواهیم در CSS تغییر دهیم، مطابقت دارند.
ما می‌توانیم متغیرهای CSS را تعریف کرده و به عنصر ریشه (root) نسبت دهیم، برایشان مقادیر پیش‌فرض مشخص کنیم و با کمک JavaScript روی `input`ها _event listener_ قرار دهیم تا هر زمان که کاربر مقدار ورودی را تغییر داد، یک تابع _event handler_ اجرا شود. این تابع را طوری تعریف می‌کنیم که کل صفحه را هدف قرار دهد و مقادیر متغیرهای CSS را به‌روزرسانی کند.


## مراحل پیاده‌سازی

### قسمت CSS:

۱. متغیرهای CSS باید داخل استایل یک عنصر تعریف شوند و برای اینکه بتوان در تمام فایل از آن متغیرها استفاده کرد، باید یک استایل برای عنصر <span dir="ltr">`:root`</span> ایجاد کنیم و داخل آن متغیرهای موردنظر را ایجاد کنیم. در این تمرین، سه متغییر با نام‌های یکسان با عناصر `input` در HTML تعریف می‌کنیم. استفاده از دو خط تیره (--) و سپس نام متغیر، سینتکس تعریف متغیرهای CSS3 است.

```css
:root {
  --base: #ffc600;
  --blur: 10px;
  --padding: 10px;
}
```

۲. یک استایل برای عنصر `img` تعریف می‌کنیم و ویژگی‌های `background`، `filter` و `padding` را برابر متغیرهای تعریف شده در عنصر root قرار می‌دهیم. برای استفاده از متغیرهایی که قبلا در CSS تعریف کرده‌ایم از `var(--variableName)` استفاده می‌کنیم.

```css
img {
  background: var(--base);
  filter: blur(var(--blur));
  padding: var(--padding);
}
```

۳. برای عنصر <span dir="ltr">`.hl`</span> رنگ متن را `var(--base)` قرار بده.

### قسمت JavaScript:

۱. یک متغیر تعریف کرده و با استفاده از `document.querySelectorAll('.controls input')`، لیست همه عناصر `input` در HTML را در آن ذخیره می‌کنیم.

۲. برای هر HTML Node Element که در متغیر ذخیره شده‌اند، یک _event listener_ تعریف می‌کنیم که تابع _event handler_ را وقتی ورودی تغییر کرد اجرا کند (رویداد `change`).

۳. مرحله 2 را برای یک _event listener_ دیگر که تابع _event handler_ را وقتی اشاره‌گر ماوس روی ورودی‌ها حرکت می‌کند اجرا کند (رویداد `mousemove`).

۴. یک تابع به عنوان _event handler_ تعریف می‌کنیم. این تابع، مقدار متغیر CSS مربوطه را در سطح **root** به‌روزرسانی می‌کند که نام آن با ویژگی `name` در عنصر `input` فراخواننده، مطابقت دارد.

**نکته:** تابع _event handler_ برای هر دو رویداد یکسان است.

**نکته‌:** ویژگی‌هایی مثل `padding` و `blur` به‌درستی به‌روزرسانی نمی‌شوند چون مقدار دریافتی از `input` شامل واحد اندازه‌گیری (مثل `px` یا `em`) نیست. اگر نیاز به پسوند باشد، می‌توانیم از ویژگی `data-sizing` در تگ `input` استفاده کنیم تا واحد موردنظر را به مقدار ورودی اضافه کنیم. برای استفاده از هر ویژگی `data`، از شئ `dataset` در جاوااسکریپت استفاده می‌کنیم که همه ویژگی‌های `data` آن عنصر خاص در این شئ ذخیره شده است.

**تفاوت `array` (آرایه) با `NodeList`:** استفاده از `querySelectorAll` برای انتخاب عناصر HTML، یک `NodeList` برمی‌گرداند که با آرایه متفاوت است. آرایه‌ها یک نوع داده مهم هستند که انواع متدهای از پیش تعیین شده دارند و می‌توان با استفاده از آن‌ها استفاده‌های زیادی از داده‌ها و تغییرات آن‌ها داشت. اما `NodeList`ها متدهای پیش‌فرض محدودی دارند. برای دیدن این متدها، می‌توانید با اجرا کردن یک `querySelectorAll` در کنسول، نتیجه و با باز کردن قسمت `__proto__: NodeList` متدهای پیش‌فرض یک `NodeList` را مشاهده کنید. در اکثر پروژه‌ها، معمولا `NodeList`ها را به آرایه تبدیل می‌کنند تا انعطاف و کاربرد داده‌ها بیشتر شود. در این تمرین، این کار را نمی‌کنیم ولی در تمرین‌های آینده تبدیل را انجام خواهیم داد.

---

✅ و تمام!

</div>